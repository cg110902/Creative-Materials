
# 完整诊断系统 v1.0

> **触发**：收到【诊断】指令  
> **时间**：5-10分钟  
> **任务**：对照信息胶囊逐项检查，生成报告

---

## 一、工作模式

**从"创作者"切换到"审查者"**
- 把artifact当作"别人写的"客观评估
- 严格按清单逐项对照，不跳过
- 不为创作选择辩护，客观标记偏离

---

## 二、8大类27项检查清单

### 🔴 A类：硬约束违反（致命）

**A1. §14《剧情护栏》**
- [ ] 逐条对照角色/道具/地点/设定保护清单
- [ ] 检查能力限制（境界/力量上限）

**A2. §15《禁止清单汇总》**
- [ ] 逐条对照主角/配角/剧情/情节禁止事项

**A3. §7.4《本章绝对做不到》**
- [ ] 逐条检查主角是否做了清单中的任何一项

**A4. §18《本章矛盾预警》（如有）**
- [ ] 逐条检查"❌禁止场景"是否出现

**判定**：违反1条 → 致命问题

---

### 🟠 B类：必达任务遗漏（严重）

**B1. §3.1《核心任务》**
- [ ] 核心任务是否完成？[完成/未完成/部分]

**B2. §3.2《事件列表》**
- 逐个事件检查：
  - [ ] 是否出现？
  - [ ] 关键信息是否传递？（逐条对照）
  - [ ] Node链是否完整？（逐个Node检查）
  - [ ] 约束是否遵守？（逐条对照）

**B3. §3.3《信息流动管控》**
- [ ] 必传信息：逐条检查是否传递
- [ ] 必密信息：逐条检查是否泄露

**B4. §16《铺垫任务》**
- 逐个任务检查：
  - [ ] 按验证标准逐项检查是否完成

**B5. §9.2《未完成钩子》**
- [ ] 本章标记"推进/埋设/回收"的钩子是否完成

**判定**：核心任务未完成/关键信息遗漏/铺垫未执行 → 严重问题

---

### 🟡 C类：连续性断裂（严重）

**C1. §2.3《必须延续的要素》**
- 逐项对照：
  - [ ] 身体记忆是否延续？
  - [ ] 情感温度是否延续？
  - [ ] 注意力焦点是否延续？

**C2. §2.4《必须避免的断裂》**
- 逐项检查：
  - [ ] 温度断崖是否出现？
  - [ ] 记忆丢失是否出现？
  - [ ] 空间跳跃是否出现？
  - [ ] 时间跳跃是否出现？

**C3. §5.1《情绪流动路径》**
- [ ] 胶囊设计路径 vs 正文实际路径：是否匹配？

**C4. §1.2《时空锚点-时间》**
- [ ] 绝对时间是否符合？
- [ ] 相对时间是否符合？
- [ ] 倒计时是否正确递减？

**C5. §1.2《时空锚点-空间》**
- [ ] 主场景是否匹配？
- [ ] 主角位置是否匹配？
- [ ] 场景氛围是否体现？

**C6. §4《关系温度计》**
- 逐对检查：
  - [ ] 温度是否匹配？
  - [ ] 互动表现是否匹配状态词？
  - [ ] 如有变化，是否符合"本章预期"？

**判定**：上章要素未延续/时空跳跃/情绪断崖/关系温度大幅跳变 → 严重问题

---

### 🟡 D类：人设崩塌（严重）

**D1. §7.2《OOC预警场景》**
- [ ] 逐条检查预警场景是否踩雷

**D2. §7.2《决策模式》**
- [ ] 主角决策是否符合优先级/典型模式？
- [ ] 是否违反"绝不会做"？

**D3. §7.2《核心驱动力》**
- [ ] 主角行为是否受此驱动？
- [ ] 是否出现与驱动力冲突的行为？

**D4. §7.5/§12《言行风格》**
- [ ] 对话是否符合说话特点？
- [ ] 动作是否符合标志动作/微表情？

**D5. §8《配角档案》**
- [ ] 对重要配角重复D1-D4检查

**判定**：OOC场景出现/驱动力遗忘/决策模式违背 → 严重问题

---

### 🟢 E类：逻辑不自洽（中等）

**E1. §11《资源管理》**
- [ ] 本章开始 vs 结束资源对比
- [ ] 是否凭空出现/无故消失？
- [ ] 变动是否符合预期？

**E2. §7.4《能力与境界》**
- [ ] 战斗/施法表现是否符合境界？
- [ ] 是否超出"当前上限"？
- [ ] 使用的技能是否在"已解锁"列表？
- [ ] 新技能是否有获得场景？

**E3. 事件逻辑链**
- [ ] 梳理关键转折，是否有"天降"（无铺垫）？

**E4. §9.4《信息不对称》**
- [ ] 主角是否知道了"不该知道"的信息？
- [ ] 读者是否知道了"必须保密"的信息？

**判定**：战力超限且无解释/资源凭空出现/天降转折 → 中等问题

---

### 🟢 F类：Fact管理缺失（中等）

**F1. §9.1《已确认事实》**
- [ ] 逐条检查Fact是否被改写

**F2. 新Fact提取**
- [ ] 识别需记录的新事实（关键剧情/信息揭露/关系变化/世界观扩展）
- [ ] 列出：Fact-NEW1/NEW2/...

**F3. §9.2《未完成钩子》**
- [ ] 本章应回收/推进的钩子是否完成？

**判定**：已确认Fact被改写 → 严重；钩子遗漏 → 中等

---

### 🔵 G类：细节缺失（轻度）

**G1. §13《感官描写》**
- [ ] 检查视觉/听觉/触觉/嗅觉/味觉/体感维度
- [ ] 是否单一化（只有视觉）？

**G2. §1.2《场景氛围》**
- [ ] 是否体现氛围关键词？

**G3. §7.5《微表情/习惯动作》**
- [ ] 是否有微表情/习惯动作？

**判定**：影响沉浸感但不影响剧情

---

### 🔵 H类：铺垫/呼应缺失

**H1. 前置铺垫**
- [ ] 回顾§9.2，本应在本章使用的伏笔是否接住？

**H2. 后续铺垫**
- [ ] 再次确认§16铺垫任务是否完成（特别是结尾）

**判定**：铺垫遗漏 → 中等（影响下章）

---

## 三、诊断报告格式

```markdown
【完整诊断报告】

═══════════════════════════════════════════════════════
总览
═══════════════════════════════════════════════════════

扫描项目：8大类27项
通过：X/27 | 问题：Y/27

问题分级：
  🔴 致命（A）：Z个
  🟠 严重（B/C/D）：W个
  🟡 中等（E/F/H）：V个
  🔵 轻度（G）：U个

═══════════════════════════════════════════════════════
🔴 致命问题（必须修复）
═══════════════════════════════════════════════════════

【如无】✓ 无致命问题

【如有】
问题1 [类型]
  位置：第X段
  约束：§XX"[完整复制]"
  违反：[简述20字内]
  修复：[一句话建议]

═══════════════════════════════════════════════════════
🟠 严重问题（强烈建议修复）
═══════════════════════════════════════════════════════

【如无】✓ 无严重问题

【如有】
问题N [类型]
  任务/要求：§XX"[简述]"
  状态：未完成/部分完成/违反
  影响：[简述]
  修复：[具体建议]

═══════════════════════════════════════════════════════
🟡 中等问题（建议修复）
═══════════════════════════════════════════════════════

【如无】✓ 无中等问题

【如有】
问题N [类型]
  描述：[简述]
  修复：[建议]

═══════════════════════════════════════════════════════
🔵 轻度问题（可选修复）
═══════════════════════════════════════════════════════

【如无】✓ 无轻度问题

【如有】
问题N [类型]：[简述]

═══════════════════════════════════════════════════════
✅ 新增Fact提取（供Gemini记录）
═══════════════════════════════════════════════════════

【如无】- 本章无需记录新Fact

【如有】
Fact-NEW1: [内容]
  出现：第X段 | 重要性：🔴/🟠/🟢

═══════════════════════════════════════════════════════
📊 决策建议
═══════════════════════════════════════════════════════

【情况A：无致命+严重≤2】
✓ 立即update修复，诊断通过

【情况B：致命≥1 OR 严重≥3】
⚠️ 方案1：逐个update（问题分散）
   方案2：等待人类决策（涉及创意）
   方案3：重写某部分（严重偏离）
   推荐：[根据具体情况]

【情况C：问题>5】
✗ 建议人类先审查后决策

═══════════════════════════════════════════════════════
🔧 自动修复状态
═══════════════════════════════════════════════════════

【如符合条件：问题≤3 且 都是简单修改】
✓ 正在执行update...
  修复1：[...]
  修复2：[...]

修复完成，重新扫描...
结果：[通过/仍有问题]

【如不符合】
⏸ 需人类决策，等待指示
```

---

## 四、自动修复机制

### 触发条件（ALL满足）

1. 问题总数 ≤ 3个
2. 没有致命问题（A类）
3. 所有问题都属于"可自动修复"类型：
   - 补充缺失铺垫（结尾补1-2句）
   - 删除泄露秘密（删除某句）
   - 补充感官描写（增加形容词）
   - 修正称呼/数字（简单替换）
   - 补充体感/微表情（增加动作）

### 不可自动修复（必须等待人类）

- OOC问题（需重写整段）
- 剧情大幅偏离（需调整结构）
- 战力超限（需判断"错误"还是"创意"）
- 情绪断崖（需重写过渡）
- 重要任务遗漏（需插入新场景）

### 执行步骤

1. 判断是否符合触发条件
2. 如符合，逐个update修复
3. 修复后重新快速扫描（A-H类）
4. 输出最终结果

### 限制

- 单次最多修复3处
- 如重新扫描仍有问题，停止修复，等待人类

---

## 五、快速检查技巧

### 高效扫描方法

**阶段1：机械对照（5分钟）**
- 打开§14/§15/§7.4，逐条比对（A类）
- 打开§3.2，逐个事件核对Node链（B类）
- 打开§2.3/§2.4，逐项检查延续性（C类）

**阶段2：理解判断（3分钟）**
- 梳理正文决策，对照§7.2（D类）
- 梳理正文资源变化，对照§11（E类）
- 识别正文新Fact（F类）

**阶段3：质量评估（2分钟）**
- 快速浏览感官维度（G类）
- 检查结尾是否有铺垫（H类）

### 常见问题定位

**如发现问题数>10：**
- 说明artifact严重偏离，不建议逐个修复
- 直接在报告中说明"建议人类审查"

**如卡在某一项检查：**
- 不要花费超过1分钟纠结单个检查项
- 标记"不确定"，继续下一项
- 在报告中说明不确定点，让人类判断

---

## 六、特殊情况处理

### 情况1：信息胶囊缺失某模块

如§18/§19不存在：
- 跳过对应检查项
- 在报告中说明"§XX不存在，已跳过"

### 情况2：正文使用了[?]占位

- 不算错误
- 在报告"中等问题"中标记"有N处占位符待确认"
- 列出位置供人类补充

### 情况3：创意与设定冲突

如正文有"精彩但违反设定"的情节：
- 在报告中标记为"需人类决策"
- 说明："此处违反XXX约束，但可能是有价值的创意，建议人类判断是否追认"

---

**诊断系统完。执行时严格按清单逐项检查，不跳过任何一项。**

